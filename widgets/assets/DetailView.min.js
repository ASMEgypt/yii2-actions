(function(){$.widget("execut.DetailView",{buttonsEl:null,topOffset:null,_create:function(){var a=this;a._initElements();a._initEvents()},_initElements:function(){var a=this;a.formEl=a.element.parent();a.buttonsEl=a.element.find(".buttons-container")},isSaved:false,_initEvents:function(){var b=this,a=false;b.formEl.on("beforeValidate",function(f,g,c){var d=function(){b.formEl.unbind("ajaxComplete",d);if(a){b.element.loadingOverlay("remove");a=false}};b.formEl.on("ajaxComplete",d);if(!a){a=true;b.element.loadingOverlay({loadingText:"Загрузка.."})}});b.formEl.on("submit",function(d,f,c){if(!a){a=true;b.element.loadingOverlay({loadingText:"Загрузка.."})}});b.formEl.on("afterValidate",function(d,f,c){if(a){b.element.loadingOverlay("remove");a=false}});if(b.options.isFloatedButtons){setTimeout(function(){b.topOffset=null;b.initButtonsOffsetTop()},1000);b.initButtonsOffsetTop();$(window).on("scroll",function(){b.positionizeButtons()}).on("resize",function(){b.positionizeButtons()})}},initButtonsOffsetTop:function(){let t=this;if(t.topOffset===null){t.topOffset=t.buttonsEl.removeClass("floated-buttons").offset().top+t.buttonsEl.outerHeight(true)}t.positionizeButtons()},positionizeButtons:function(){let t=this,diff=$(window).scrollTop()+$(window).height()-t.topOffset+5,isFloat=diff<0;console.debug("Diff{"+diff+"}=$(window).scrollTop(){"+$(window).scrollTop()+"} + $(window).height(){"+$(window).height()+"} - t.topOffset{"+t.topOffset+"}");if(isFloat){t.buttonsEl.addClass("floated-buttons");let bottom=Math.floor(-diff-t.buttonsEl.outerHeight(true)+5)+"px";t.buttonsEl.css("bottom",bottom)}else{t.buttonsEl.removeClass("floated-buttons")}}})})();