(function(){$.widget("execut.DetailView",{buttonsEl:null,topOffset:null,_create:function(){var a=this;a._initElements();a._initEvents();a._initReloadedAttributes()},_initElements:function(){var a=this;a.formEl=a.element.parent();a.buttonsEl=a.element.find(".buttons-container")},_initialValueRefreshAttribute:null,_initReloadedAttributes:function(){var a=this;if(!a.options.reloadedAttributes.length){return}setTimeout(function(){a.reloadReloadedAttributes()},5000)},reloadReloadedAttributes:function(){var a=this;$.ajax({dataType:"json",url:location.href,data:{getReloadedAttributes:1},success:function(b){for(var c in b.rows){$("."+c).replaceWith(b.rows[c])}if(a.options.initialValueRefreshAttribute&&typeof b.refreshAttribute!=="undefined"){if(b.refreshAttribute!==a.options.initialValueRefreshAttribute){location.reload()}}setTimeout(function(){a.reloadReloadedAttributes()},5000)},headers:{"X-Pjax":1}})},isSaved:false,_initEvents:function(){var b=this,a=false;b.formEl.on("beforeValidate",function(f,g,c){var d=function(){b.formEl.unbind("ajaxComplete",d);if(a){b.element.loadingOverlay("remove");a=false}};b.formEl.on("ajaxComplete",d);if(!a){a=true;b.element.loadingOverlay({loadingText:"Загрузка.."})}});b.formEl.on("submit",function(d,f,c){if(!a){a=true;b.element.loadingOverlay({loadingText:"Загрузка.."})}});b.formEl.on("afterValidate",function(d,f,c){if(a){b.element.loadingOverlay("remove");a=false}});if(b.options.isFloatedButtons){setTimeout(function(){b.topOffset=null;b.initButtonsOffsetTop()},1000);b.initButtonsOffsetTop();$(window).on("scroll",function(){b.positionizeButtons()}).on("resize",function(){b.positionizeButtons()})}},initButtonsOffsetTop:function(){var a=this;if(a.topOffset===null){a.topOffset=a.buttonsEl.removeClass("floated-buttons").offset().top+a.buttonsEl.outerHeight(true)}a.positionizeButtons()},positionizeButtons:function(){var c=this,d=$(window).scrollTop()+$(window).height()-c.topOffset+5,a=d<0;if(a){c.buttonsEl.addClass("floated-buttons");var b=Math.floor(-d-c.buttonsEl.outerHeight(true)+5)+"px";c.buttonsEl.css("bottom",b)}else{c.buttonsEl.removeClass("floated-buttons")}}})})();